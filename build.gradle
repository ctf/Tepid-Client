group 'ca.mcgill.science.ctf.tepid'

apply plugin: 'java'
apply plugin: 'idea'
sourceCompatibility = 1.8

repositories {
    mavenCentral()
    maven { url "https://jitpack.io" }
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'

    compile fileTree(dir: 'libs', include: ['*.jar'])
    
    compile 'com.github.cpicon92:Q:ccb4d8fb9d'

    compile "ca.mcgill:tepid-commons:$TEPID_COMMONS"

    // https://mvnrepository.com/artifact/net.sf.jacob-project/jacob
//    compile group: 'net.sf.jacob-project', name: 'jacob', version: '1.14.3'

    // https://mvnrepository.com/artifact/com.dorkbox/SystemTray-Dorkbox-Util
    compile group: 'com.dorkbox', name: 'SystemTray-Dorkbox-Util', version: '2.14'

    // https://mvnrepository.com/artifact/com.dorkbox/SystemTray TODO update
    compile group: 'com.dorkbox', name: 'SystemTray', version: '2.14'

    // https://mvnrepository.com/artifact/net.java.dev.jna/jna
    compile group: 'net.java.dev.jna', name: 'jna', version: '4.4.0'

    // https://mvnrepository.com/artifact/net.java.dev.jna/jna-platform
    compile group: 'net.java.dev.jna', name: 'jna-platform', version: '4.4.0'

    // https://mvnrepository.com/artifact/org.slf4j/slf4j-api
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'

    // https://mvnrepository.com/artifact/org.eclipse/swt
//    compile group: 'org.eclipse', name: 'swt', version: '4.6.1'

    //COMMONS

    // https://mvnrepository.com/artifact/commons-beanutils/commons-beanutils
    compile group: 'commons-beanutils', name: 'commons-beanutils', version: '1.8.3'

    // https://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-common
    compile group: 'org.glassfish.jersey.core', name: 'jersey-common', version: '2.25'

    // https://mvnrepository.com/artifact/org.glassfish.hk2.external/aopalliance-repackaged
    compile group: 'org.glassfish.hk2.external', name: 'aopalliance-repackaged', version: '2.4.0'

    // https://mvnrepository.com/artifact/log4j/log4j
//    compile group: 'log4j', name: 'log4j', version: '1.2.17'

    // https://mvnrepository.com/artifact/org.glassfish.jersey.containers/jersey-container-servlet
    compile group: 'org.glassfish.jersey.containers', name: 'jersey-container-servlet', version: '2.25'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-email
    compile group: 'org.apache.commons', name: 'commons-email', version: '1.4'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-jaxb-annotations
    compile group: 'com.fasterxml.jackson.module', name: 'jackson-module-jaxb-annotations', version: '2.5.4'

    // https://mvnrepository.com/artifact/org.glassfish.hk2/hk2-locator
//    compile group: 'org.glassfish.hk2', name: 'hk2-locator', version: '2.4.0'

    // https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api
    compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1'

    // https://mvnrepository.com/artifact/org.ow2.asm/asm-debug-all
//    compile group: 'org.ow2.asm', name: 'asm-debug-all', version: '5.0.4'

    // https://mvnrepository.com/artifact/org.tukaani/xz
    compile group: 'org.tukaani', name: 'xz', version: '1.5'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider
    compile group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-json-provider', version: '2.5.4'

    // https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api
    compile group: 'javax.ws.rs', name: 'javax.ws.rs-api', version: '2.0.1'

    // https://mvnrepository.com/artifact/org.glassfish.jersey.media/jersey-media-json-jackson
    compile group: 'org.glassfish.jersey.media', name: 'jersey-media-json-jackson', version: '2.22.1'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.5.4'

}

task copyBuilder(type: Copy) {
    into "$buildDir/libs"
    from "files"
}

task copyLibs(type: Copy) {
    into "$buildDir/libs"
    from configurations.runtime
}

task copyLibsLibs(type: Copy) {
    into "$buildDir/libs/libs"
    from configurations.runtime
}

task commandLinux(type: Exec) {
    workingDir "$buildDir/libs"
    commandLine "java", "-classpath", "./*", "ca.mcgill.science.tepid.client.Main"
}

jar.baseName = 'tepid'

task tepidWindows(type: GradleBuild) {
    tasks = ['copyBuilder', 'copyLibsLibs', 'jar']
}

task tepidLinux(type: GradleBuild) {
    tasks = ['copyLibs', 'jar']
}